<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tu Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="dashboard-body">
    <header>
        <div class="logo">ðŸŽ® Gamification</div>
        <div class="menu-toggle" id="menu-toggle">â˜°</div>
        <nav id="dashboard-menu">
            <ul>
                <li><a href="#">Cambiar tu avatar</a></li>
                <li><a href="#">Programar Daily Form</a></li>
                <li><a href="#">Cerrar sesiÃ³n</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="dashboard-content">
            <h1>Bienvenido a tu Dashboard</h1>
            <img id="avatar" src="" alt="Tu Avatar" class="dashboard-avatar">
            <p id="welcome-msg">Cargando datos...</p>
        </div>
    </main>
    <script>
    document.addEventListener("DOMContentLoaded", async () => {
        const params = new URLSearchParams(window.location.search);
        const email = params.get("email");
        if (!email) {
            alert("No se proporcionÃ³ un correo electrÃ³nico.");
            return;
        }
        try {
            const response = await fetch(`YOUR_WEBAPP_URL?email=${encodeURIComponent(email)}`);
            const data = await response.json();
            let avatarURL = data.avatar_url || "https://i.imgur.com/DEFAULT.jpg";
            if (avatarURL.includes("imgur.com") && !avatarURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)) {
                avatarURL += ".jpg";
            }
            document.getElementById("avatar").src = avatarURL;
            document.getElementById("welcome-msg").textContent = `Hola ${data.nombre || "usuario"} ðŸ‘‹`;
        } catch (err) {
            alert("Error cargando datos del dashboard.");
        }
    });
    document.getElementById("menu-toggle").addEventListener("click", () => {
        document.getElementById("dashboard-menu").classList.toggle("active");
    });
    </script>
</body>
</html>
