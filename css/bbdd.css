/* =========================================
   BBDD Editor ‚Äî CSS can√≥nico (dashboard look)
   ========================================= */

/* --- Tokens --- */
:root{
  --brand:#7d3cff;
  --ink:#ecedff;
  --ink-soft:#cfd3ff;
  --bg:#0b1020;
  --panel-0:#0e1224;
  --panel-1:#121736;
  --glass-1: rgba(18,22,45,.75);
  --glass-2: rgba(12,16,35,.75);
  --line: rgba(122,134,255,.18);
  --line-soft: rgba(122,134,255,.14);
  --chip:#1b2247;
  --ok:#1ec28b;
  --danger:#ff5364;
  --input-bg: rgba(12,16,36,.6);
  --input-brd: rgba(122,134,255,.22);
}

/* --- Base --- */
*{ box-sizing:border-box; }
html,body{
  margin:0; padding:0;
  background:#0c1020;
  color:var(--ink);
  font-family:"Inter",ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
}

/* --- Overlay/Panel (glass) --- */
.bbdd-overlay{
  position:fixed; inset:0; z-index:9999;
  display:flex; align-items:center; justify-content:center;
  padding:24px;
  background: rgba(6,8,18,.55);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.bbdd-overlay.hidden{ display:none; }

.bbdd-panel{
  width:min(1200px,100%);
  height:min(90vh,100%);
  display:flex; flex-direction:column;
  border:1px solid var(--line);
  border-radius:14px;
  background: linear-gradient(180deg,var(--glass-1),var(--glass-2));
  box-shadow: 0 24px 80px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.04);
}
@media (max-width:768px){
  .bbdd-overlay{ padding:0; }
  .bbdd-panel{ width:100%; height:100%; border-radius:0; }
}

/* --- Header --- */
.bbdd-header{
  display:flex; align-items:center; gap:10px;
  padding:14px 16px;
  background: linear-gradient(180deg, rgba(22,27,62,.75), rgba(16,21,48,.55));
  border-bottom:1px solid var(--line);
}
.bbdd-header h1{ margin:0; font-size:18px; font-weight:700; color:var(--ink); }
.spacer{ flex:1; }

/* --- Info card --- */
.gj-info{
  margin:14px 16px; padding:14px 16px;
  background: linear-gradient(180deg, rgba(19,24,54,.65), rgba(16,22,46,.55));
  border:1px solid var(--line);
  border-left:4px solid var(--brand);
  border-radius:12px;
  color:var(--ink);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.03);
}
.gj-info .legend{
  margin-top:10px; display:flex; gap:14px; flex-wrap:wrap;
  font-size:12px; color:#bfc6ff;
}
.gj-info .legend span{
  background:#141a39; border:1px solid #2a3466;
  padding:6px 8px; border-radius:8px;
}

/* --- Tools bar (left/center/right) --- */
.bbdd-tools{
  display:grid;
  grid-template-columns: 1fr minmax(280px,520px) 1fr;
  align-items:center; gap:12px;
  padding:10px 16px;
}
.bbdd-tools .left{ justify-self:start; display:flex; gap:10px; align-items:center; }
.bbdd-tools .center{ justify-self:center; width:100%; }
.bbdd-tools .right{ justify-self:end; }

/* --- Inputs/Buttons --- */
.input, select, textarea{
  width:100%; outline:none;
  background: var(--input-bg);
  border:1px solid var(--input-brd);
  color:var(--ink);
  border-radius:12px; padding:9px 10px;
  transition: border-color .15s ease, box-shadow .15s ease;
}
.input::placeholder{ color:#b7c0ff; opacity:.9; }
.input:focus, select:focus, textarea:focus{
  border-color:#7d3cff; box-shadow:0 0 0 3px rgba(125,60,255,.18);
}

.btn{
  background:#7d3cff; color:#fff;
  border:1px solid rgba(125,60,255,.6);
  padding:9px 14px; border-radius:12px;
  font-weight:700; cursor:pointer;
}
.btn:hover{ filter:brightness(1.06); }
.btn.ghost{
  background: rgba(26,31,68,.6);
  border:1px solid rgba(122,134,255,.20);
  color:#cfd3ff;
}
.btn.success{ background:var(--ok); color:#072a18; border:1px solid #27dca0; }
.btn.danger{ background:var(--danger); border:1px solid #ff7682; }

.btn.loading{ opacity:.7; cursor:wait; position:relative; }
.btn.loading::after{
  content:""; position:absolute; right:12px; top:50%; transform:translateY(-50%);
  width:14px; height:14px; border:2px solid currentColor; border-top-color:transparent;
  border-radius:50%; animation: spin .8s linear infinite;
}
@keyframes spin{ to{ transform:translateY(-50%) rotate(360deg); } }

.dot{ margin-left:10px; color:#ffd56a; }
.hidden{ display:none !important; }

/* --- Table wrapper + sticky header + overlay spinner --- */
#table-wrap{
  position:relative;
  margin:0 16px 16px;
  border:1px solid var(--line-soft);
  border-radius:12px;
  background: linear-gradient(180deg, rgba(16,22,48,.55), rgba(13,18,40,.55));
  overflow:auto;                 /* el scroll vive ac√° */
  max-height:60vh;
}

/* Tabla */
#bbdd-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
}
#bbdd-table thead th{
  position:sticky; top:0; z-index:3;
  padding:10px 12px; text-align:left;
  background: rgba(28,34,82,.6);
  color:#dbe0ff;
  border-bottom:1px solid var(--line-soft);
}
#bbdd-table tbody td{
  padding:8px 10px;
  border-bottom:1px solid rgba(122,134,255,.12);
}
#bbdd-table tbody tr:hover{ background: rgba(28,34,82,.22); }

/* Chips feedback / acciones */
.feedback{ display:flex; gap:6px; align-items:center; justify-content:center; }
.feedback button{
  background: rgba(27,34,71,.6);
  border:1px solid rgba(122,134,255,.22);
  color:#cfd3ff; border-radius:10px; padding:6px 9px; font-size:12px; cursor:pointer;
}
.feedback button.active{
  background: rgba(90,105,214,.32); border-color:#5a69d6; color:#ecedff;
}
.handle{ cursor:grab; opacity:.7; }
.row-actions{ display:flex; gap:6px; align-items:center; justify-content:flex-end; }
.row-actions .mini{
  background: rgba(26,31,68,.6);
  border:1px solid rgba(122,134,255,.20);
  color:#cfd3ff; border-radius:10px; padding:6px 8px; font-size:12px;
}


/* --- Footer --- */
.bbdd-footer{
  padding:12px 16px; display:flex; align-items:center; gap:10px;
  border-top:1px solid var(--line);
  background: linear-gradient(180deg, rgba(18,22,45,.55), rgba(12,16,35,.55));
}

/* --- Scrollbar oscuro (evita ‚Äúbarra blanca‚Äù) --- */
#table-wrap::-webkit-scrollbar{ width:10px; height:10px; }
#table-wrap::-webkit-scrollbar-thumb{
  background: rgba(122,134,255,.28); border-radius:10px; border:2px solid transparent;
  background-clip: padding-box;
}
#table-wrap::-webkit-scrollbar-track{ background: transparent; }

/* --- AI sparkles (placeholder visual) --- */
.ai-sparkle{
  position:absolute; right:12px; top:12px;
  width:18px; height:18px; opacity:0; pointer-events:none;
  background: radial-gradient(circle,#ffd27e 20%, rgba(255,210,126,0) 60%);
  filter: drop-shadow(0 0 6px #ffd27e);
  animation: sparkle 900ms ease-out infinite;
}
@keyframes sparkle{
  0%{ transform:scale(.4); opacity:0; }
  30%{ transform:scale(1); opacity:.9; }
  100%{ transform:scale(.2); opacity:0; }
}

/* El contenedor necesita altura aunque no haya filas todav√≠a */
#table-wrap{
  position: relative;
  margin: 0 16px 16px;
  border: 1px solid var(--line-soft);
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(16,22,48,.55), rgba(13,18,40,.55));
  overflow: auto;
  max-height: 60vh;

  /* üí° clave para que el spinner tenga ‚Äúlienzo‚Äù donde centrarse */
  min-height: 360px;        /* subilo a 420 si quer√©s m√°s */
}

/* --- √Årea de tabla con altura m√≠nima para que el overlay tenga ‚Äúlienzo‚Äù --- */
#table-wrap{
  position: relative;
  min-height: 380px;          /* sub√≠ a 420 si quer√©s */
  max-height: 60vh;
  overflow: auto;
  border-radius: 12px;
}

/* --- Spinner overlay centrado, con blur por detr√°s --- */
#table-spinner{
  position: absolute;
  inset: 0;
  display: none;              /* se muestra con .table-loading */
  z-index: 6;                 /* por encima del thead sticky */
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  background: rgba(10,12,24,.45);
  color: var(--ink);
  font-weight: 600;

  /* centrado perfecto y en fila */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

/* Mostrar overlay mientras carga + ‚Äúapagar‚Äù la tabla */
#table-wrap.table-loading #table-spinner{ display: flex; }
#table-wrap.table-loading #bbdd-table{
  filter: blur(1px);
  opacity: .6;
  pointer-events: none;
}

/* Pieza giratoria + texto */
#table-spinner .ring{
  width: 28px; height: 28px; border-radius: 50%;
  border: 3px solid rgba(255,255,255,.18);
  border-top-color: var(--brand);
  animation: gj-spin .9s linear infinite;
}
@keyframes gj-spin{ to{ transform: rotate(360deg); } }
#table-spinner .txt{ font-weight: 600; opacity: .95; }

/* Header pegado (por si no lo ten√©s a√∫n) */
#bbdd-table thead th{
  position: sticky;
  top: 0;
  z-index: 3;
  background: #171a23;
  box-shadow: 0 1px 0 rgba(255,255,255,.04);
}






//========ULTIMO===================

/* === Blur sutil en panel y header === */
.bbdd-panel {
  background: linear-gradient(180deg, rgba(18,22,45,0.75), rgba(12,16,35,0.75));
  border: 1px solid rgba(122,134,255,0.18);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.bbdd-header {
  background: linear-gradient(180deg, rgba(22,27,62,.75), rgba(16,21,48,.55));
  border-bottom: 1px solid rgba(122,134,255,0.16);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

/* === Blur tambi√©n en la barra de herramientas (con filtro/AI) === */
.bbdd-tools {
  background: rgba(16, 20, 38, 0.45);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border-radius: 8px;
  padding: 10px 16px;
}

/* === Scrollbar m√°s discreto (oscuro y cuadrado) === */
.bbdd-table-wrap::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.bbdd-table-wrap::-webkit-scrollbar-track {
  background: rgba(20, 22, 35, 0.4);
}
.bbdd-table-wrap::-webkit-scrollbar-thumb {
  background: rgba(90, 105, 214, 0.6);
  border-radius: 4px;
}
.bbdd-table-wrap::-webkit-scrollbar-thumb:hover {
  background: rgba(125, 60, 255, 0.8);
}
