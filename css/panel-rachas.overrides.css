/* ===== TOKENS del panel de rachas ===== */
.dashboard-root{
  --gj-glass-blur: 18px;
  --gj-glass-bg: rgba(255,255,255,.06);
  --gj-glass-br: rgba(255,255,255,.22);
  --gj-glass-shadow: 0 12px 30px rgba(0,0,0,.35);

  --gj-r-card: 28px;     /* cards grandes */
  --gj-r-inner: 16px;    /* inner containers */
  --gj-r-pill: 999px;

  --gj-surface-1: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.05));
  --gj-stroke-1: rgba(255,255,255,.14);
  --gj-track: #1f274a;
  --gj-fill-level: linear-gradient(90deg,#FFE27A 0%, #FFC84D 55%, #F3A712 100%);

  /* ===== Ajustes rápidos ===== */
  --dash-gap: 16px;                /* espacio entre columnas */
  --dash-min-col: 360px;           /* ancho mínimo de cada columna */
  --info-pop-width: 340px;         /* ancho máximo de los tooltips */
}

/* ===== GRID: 3 columnas del MISMO ancho ===== */
.dashboard-root .dashboard-columns{
  display: grid !important;
  grid-template-columns: 1fr;
  gap: var(--dash-gap);
  align-items: start;
}
@media (min-width: 1180px){
  .dashboard-root .dashboard-columns{
    /* tres columnas iguales; cada una no baja de --dash-min-col */
    grid-template-columns: repeat(3, minmax(var(--dash-min-col), 1fr));
  }
}

/* ===== Cards con vidrio del panel ===== */
.dashboard-root .xp-box,
.dashboard-root .avatar-box,
.dashboard-root .energy-box,
.dashboard-root .daily-cultivation-section,
.dashboard-root .radar-section,
.dashboard-root .emotion-box,
.dashboard-root .missions-section,
.dashboard-root .alert-card,
.dashboard-root .warning-container,
.dashboard-root #rewardsContainer{
  position:relative;
  background:var(--gj-glass-bg);
  border:1px solid var(--gj-glass-br);
  border-radius:var(--gj-r-card);
  backdrop-filter: blur(var(--gj-glass-blur)) saturate(140%);
  -webkit-backdrop-filter: blur(var(--gj-glass-blur)) saturate(140%);
  box-shadow:var(--gj-glass-shadow);
  overflow: visible;    /* deja salir los tooltips */
}

/* brillo sutil debajo siempre */
.dashboard-root .xp-box::before,
.dashboard-root .energy-box::before,
.dashboard-root .daily-cultivation-section::before,
.dashboard-root .radar-section::before,
.dashboard-root .emotion-box::before{
  content:"";
  position:absolute; inset:-30% -8% auto -8%; height:240px;
  background:
    radial-gradient(140px 140px at 22% 68%, rgba(168,120,255,.18), transparent 60%),
    radial-gradient(190px 190px at 78% 30%, rgba(55,170,255,.18), transparent 60%);
  filter: blur(10px) saturate(120%);
  pointer-events:none;
  z-index:-1;
}

/* ===== Inner containers típicos ===== */
.dashboard-root .daily-cultivation-section .chart-wrapper,
.dashboard-root .emotion-box .emotion-chart-container,
.dashboard-root .radar-section #radarChartContainer{
  background: var(--gj-surface-1);
  border: 1px solid var(--gj-stroke-1);
  border-radius: var(--gj-r-inner);
  padding: 8px;
}

/* ===== Avatar sin margen y grande ===== */
.dashboard-root .avatar-box{ max-width: 440px; margin: 0 auto; padding: 0; }
@media (max-width: 600px){ .dashboard-root .avatar-box{ max-width:320px; } }
.dashboard-root .avatar-img{
  display:block; width:100%; aspect-ratio:3/4; height:auto;
  border-radius:var(--gj-r-card); border:1px solid var(--gj-glass-br);
}

/* ===== Barras (nivel + energy) ===== */
.dashboard-root .progress-bar{
  position:relative; height:20px; background:var(--gj-track);
  border-radius:var(--gj-r-pill); overflow:hidden;
}
.dashboard-root .progress-bar .bar-fill,
.dashboard-root #bar-nivel{
  position:absolute; inset:0; height:100%;
  background:var(--gj-fill-level); border-radius:var(--gj-r-pill);
}
.dashboard-root .energy-track{
  position:relative; height:20px; background:var(--gj-track);
  border-radius:var(--gj-r-pill); overflow:hidden;
}
.dashboard-root .energy-track .bar-fill{ height:100%; border-radius:var(--gj-r-pill); }

/* ====== INFO: regla base (arriba-derecha) ====== */
.dashboard-root .card-title{ position: relative; z-index: 2; }
.dashboard-root .card-title .info,
.dashboard-root .card-title .info-btn,
.dashboard-root .card-title .info-chip{
  position:absolute !important; top:10px; right:10px;
  z-index:1002 !important;
}
.dashboard-root .info-pop{
  position:absolute !important;
  top:0; right:0;
  transform: translate(0, calc(-100% - 10px));
  z-index:1001 !important;
  max-width: var(--info-pop-width);
  width: max-content;
}

/* ====== EXCEPCIÓN 1: Daily Cultivation (ℹ izquierda) ====== */
.dashboard-root .daily-cultivation-section .card-title .info,
.dashboard-root .daily-cultivation-section .card-title .info-btn,
.dashboard-root .daily-cultivation-section .card-title .info-chip{
  left:10px; right:auto;
}
.dashboard-root .daily-cultivation-section .info-pop{
  left:0; right:auto;
  transform: translate(0, calc(-100% - 10px));
}

/* ====== EXCEPCIÓN 2: Radar y Emotion (forzar correcto anclaje) ====== */
.dashboard-root .radar-section .card-title .info,
.dashboard-root .emotion-box .card-title .info,
.dashboard-root .radar-section .card-title .info-btn,
.dashboard-root .emotion-box .card-title .info-btn,
.dashboard-root .radar-section .card-title .info-chip,
.dashboard-root .emotion-box .card-title .info-chip{
  top:10px; right:10px; left:auto;  /* arriba-derecha fijo */
}
.dashboard-root .radar-section .info-pop,
.dashboard-root .emotion-box .info-pop{
  right:0; left:auto;
  transform: translate(0, calc(-100% - 10px));
}

/* Fallback por si el tooltip se inyecta fuera del título */
.dashboard-root .radar-section > .info-pop,
.dashboard-root .emotion-box > .info-pop,
.dashboard-root .daily-cultivation-section > .info-pop{
  position:absolute !important; top:10px; right:10px;
  transform: translate(0, calc(-100% - 10px));
  z-index:1001 !important;
}
.dashboard-root .daily-cultivation-section > .info-pop{
  left:10px; right:auto; transform: translate(0, calc(-100% - 10px));
}

/* ====== Notificaciones (coherencia visual) ====== */
.dashboard-root #gj-noti-dropdown{
  border-radius:var(--gj-r-inner) !important;
  border:1px solid var(--gj-glass-br) !important;
  background:var(--gj-glass-bg) !important;
  backdrop-filter: blur(var(--gj-glass-blur)) saturate(140%) !important;
  -webkit-backdrop-filter: blur(var(--gj-glass-blur)) saturate(140%) !important;
  box-shadow:var(--gj-glass-shadow) !important;
}

/* Espaciados menores */
.dashboard-root .card-title{ margin-bottom:8px; }
.dashboard-root .energy-meter{ margin:10px 0; }
.dashboard-root .daily-cultivation-header{
  display:flex; align-items:center; gap:10px; justify-content:space-between;
}
