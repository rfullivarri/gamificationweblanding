/* RESET & BASE */
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:"Rubik",system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;
  background:
    radial-gradient(1200px 800px at 20% -10%, #1a2340 0%, rgba(26,35,64,0) 60%),
    radial-gradient(1000px 700px at 120% 0%, #321a63 0%, rgba(50,26,99,0) 60%),
    #0b0f19;
  color:#fff;
}

/* HEADER */
header{
  background:rgba(18,24,41,.6);
  border-bottom:1px solid rgba(255,255,255,.14);
  backdrop-filter:blur(6px);
  padding:12px 18px;
  display:flex;align-items:center;justify-content:space-between;
  position:sticky;top:0;z-index:40;
}
.logo{font-weight:900}
.menu-toggle{font-size:22px;cursor:pointer}

/* MEN√ö HAMBURGUESA */
#dashboard-menu{
  display:none;flex-direction:column;position:absolute;right:18px;top:56px;z-index:50;
  background:#2e0854;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,.14);
}
#dashboard-menu.active{display:flex}
#dashboard-menu ul{list-style:none;margin:0;padding:0}
#dashboard-menu li{border-bottom:1px solid #4c1c7a}
#dashboard-menu a{display:block;padding:12px 18px;color:#fff;text-decoration:none}
#dashboard-menu a:hover{background:#501c88}

/* CONTENEDOR */
.dashboard-content{padding:10px 18px}

/* Layout anti-solapamiento:
   - columnas en flex columna con gap vertical
   - cada card empuja a la siguiente */
.dashboard-columns{
  display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between;
}
.left-column,.center-column,.right-column{
  flex:1 1 300px;min-width:300px;padding:10px;box-sizing:border-box;
  display:flex;flex-direction:column;gap:20px;          /* üëà evita que se pisen */
}

/* AVATAR */
.avatar-box{margin-bottom:0;display:flex;justify-content:center}
.avatar-img{
  width:220px;aspect-ratio:9/16;object-fit:cover;border-radius:12px;
  border:1px solid rgba(255,255,255,.14);box-shadow:0 10px 30px rgba(0,0,0,.35);
}

/* CARDS B√ÅSICAS */
.energy-box,.xp-box,.emotion-box,.missions-section .mission-card,
.daily-cultivation-section,.radar-section{
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.14);
  border-radius:12px;padding:14px;box-shadow:0 16px 48px rgba(0,0,0,.3);
  position:relative;overflow:hidden;                      /* üëà por si hay elementos internos absolutos */
}

/* /* BARRAS DE ENERG√çA */
.progress-bar{background:#444;border-radius:8px;overflow:hidden;height:18px;margin:.3em 0 1em}
.bar-fill{height:100%;background:#00bcd4;text-align:right;padding-right:8px;line-height:18px;font-size:12px;font-weight:800;border-radius:8px 0 0 8px}
.bar-fill.mood{background:#ff4081}
.bar-fill.focus{background:#b388ff}
.bar-fill.nivel{background:#ffd54f;color:#1a1a1a} */

/* RADAR */
#radarChartContainer{
  width:clamp(360px,100%,520px);
  aspect-ratio:1/1;
  margin:0 auto;
  background:#2c2c3f;border-radius:10px;padding:10px;
  display:flex;align-items:center;justify-content:center;
}
canvas{width:100% !important;height:auto !important;border-radius:10px}

/* DAILY CULTIVATION */
.daily-cultivation-header{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;margin-bottom:8px}
#month-select{padding:6px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.14);background:#3c3c5a;color:#fff;outline:none}

/* EMOTION CHART */
.emotion-legend{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:10px;font-size:13px;align-items:center}
.emotion-legend .color-box{display:inline-block;width:16px;height:16px;border-radius:4px;margin-right:6px;border:1px solid #ccc}

.emotion-chart-container{
  margin:16px auto 0;padding:16px;text-align:center;background:#2c2141;border-radius:12px;overflow-x:auto;width:100%;
}
.month-labels{display:flex;justify-content:center;gap:10px;margin-bottom:8px;padding-left:4px}
.month-label{font-size:12px;color:#bbb;min-width:5px;text-align:center}

.emotion-grid{display:grid;grid-auto-flow:column;grid-template-rows:repeat(7,1fr);gap:3px;width:max-content;margin:0 auto 6px}
.emotion-row{display:flex;gap:2px}
.emotion-cell{width:12px;height:12px;border-radius:2px;background:#3c3c3c;transition:filter .2s}
.emotion-cell:hover{filter:brightness(1.3);cursor:pointer}

/* Colores por emoci√≥n */
.emotion-cell[data-emotion="üü©"]{background:#2ECC71} /* Calma */
.emotion-cell[data-emotion="üü®"]{background:#F1C40F} /* Felicidad */
.emotion-cell[data-emotion="üü™"]{background:#9B59B6} /* Motivaci√≥n */
.emotion-cell[data-emotion="üü¶"]{background:#3498DB} /* Tristeza */
.emotion-cell[data-emotion="üü•"]{background:#E74C3C} /* Ansiedad */
.emotion-cell[data-emotion="üü´"]{background:#8D6E63} /* Frustraci√≥n */
.emotion-cell[data-emotion="‚¨ú"]{background:#A3E4D7} /* Neutral (no gris para diferenciar de vac√≠o) */

.emotion-highlight{display:flex;align-items:center;margin-top:18px;gap:14px;background:rgba(255,255,255,.05);padding:10px 14px;border-radius:12px;max-width:420px}
.big-box{width:36px;height:36px;border-radius:8px;border:2px solid #fff}
.emotion-name{font-weight:900}
.emotion-info{font-size:13px;color:#cfd6ec}

/* XP BOX */
.xp-box h3{margin:.2em 0}

/* MISIONES */
.missions-section{padding:16px}
.missions-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px;margin-top:10px}
.mission-card{border-left:6px solid #7e57c2}
.mission-card button{margin-top:10px;padding:.5em 1em;background:#7d3cff;color:#fff;border:none;border-radius:8px;cursor:pointer}
.mission-card button:hover{background:#5c28c2}

/* WARNING */
.warning-container{margin-top:10px;padding:12px;background:#fff4e5;color:#e65100;border-left:4px solid #ffa726;border-radius:8px;max-width:440px}
.warning-text{margin:0 0 8px;font-weight:800}

/* BOTONES CENTRALES */
.dashboard-links{display:flex;justify-content:center;gap:16px;margin:12px 0 6px}
.btn{background:#7d3cff;color:#fff;padding:10px 20px;border-radius:20px;text-decoration:none;font-weight:900;transition:background .25s}
.btn:hover{background:#5c28c2}

/* POPUP AVATAR (estructura lista; la l√≥gica la agregamos luego) */
.popup-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;justify-content:center;align-items:center;z-index:100}
.popup-overlay.visible{display:flex}
.popup-content{background:#2b2b3d;color:#fff;padding:20px;border-radius:12px;text-align:center;width:320px;position:relative;border:1px solid rgba(255,255,255,.14)}
.close-btn{position:absolute;right:12px;top:8px;font-size:20px;cursor:pointer}
.avatar-preview{width:120px;height:160px;object-fit:cover;border-radius:10px;margin:10px auto;border:1px solid rgba(255,255,255,.14)}
.popup-buttons{display:flex;gap:10px;justify-content:center;margin-top:8px}
.btn.cancel{background:#999}.btn.confirm{background:#4CAF50}

/* RESPONSIVE */
@media (max-width:900px){
  #radarChartContainer{width:100%}
}

#spinner-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
.spinner {
  border: 8px solid rgba(255, 255, 255, 0.2);
  border-top: 8px solid #7d3cff;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  animation: spin 1s linear infinite;
}
@keyframes spin { 0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)} }

/* ===============================
   DOPAMINE PILLAR CARD (namespaced)
   =============================== */

:root{
  /* Acentos PCARD */
  --pc-panel: #14182a;
  --pc-panel-2: #101326;
  --pc-text:  #eaf0ff;
  --pc-muted: #9aa4c7;
  --pc-border: rgba(255,255,255,.08);
  --pc-border-2: rgba(255,255,255,.06);
  --pc-chip: #1b2140;
  --pc-accent: #B17EFF;     /* violeta */
  --pc-amber:  #ffcf5a;     /* XP spark */
  --pc-blue:   #4aa8ff;     /* ‚ÄúMax‚Äù */
  --pc-pink:   #ff6ec7;     /* ‚ÄúAhora‚Äù */
  --pc-orange: #ffb86b;     /* fuego xN */
}

/* Contenedor ra√≠z de la card de constancias ‚Äì igual que tus otras cards */
.pc-card{
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); /* üëà mismo fondo */
  border:1px solid rgba(255,255,255,.14);                                         /* üëà mismo borde */
  border-radius:12px; padding:14px; box-shadow:0 16px 48px rgba(0,0,0,.3);        /* üëà misma sombra */
  color:var(--pc-text); font-family:'Rubik',system-ui,-apple-system,Segoe UI,Roboto,Arial;
  position:relative; overflow:hidden; margin-top:0;
}

/* tipograf√≠a local y utilitarios */
.pc { color: var(--pc-text); }
.pc .pc-muted { color: var(--pc-muted); }

/* topbar: tabs + info */
.pc .pc-topbar{
  display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:6px;
}
.pc .pc-tabs{ display:flex; gap:6px; }
.pc .pc-tab{
  appearance:none; border:none; cursor:pointer;
  background:#1a2042; color:#dbe2ff;
  padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px;
  border:1px solid var(--pc-border);
  transition:transform .08s ease, box-shadow .08s ease;
}
.pc .pc-tab:hover{ transform:translateY(-1px); box-shadow:0 4px 10px rgba(0,0,0,.25); }
.pc .pc-tab.pc-active{
  background:linear-gradient(135deg,#232a57,#1a2042);
  outline:2px solid rgba(255,255,255,.06);
}

/* tooltip */
.pc .pc-info{ position:relative; }
.pc .pc-info-btn{
  width:26px;height:26px;display:grid;place-items:center;border-radius:8px;
  background:#1a2042;border:1px solid rgba(255,255,255,.10); cursor:pointer;
}
.pc .pc-info-bubble{
  position:absolute; right:0; top:30px; width:min(340px,80vw);
  background:#121733; border:1px solid rgba(255,255,255,.12);
  border-radius:10px; padding:10px 12px; font-size:12px; color:#dfe5ff; line-height:1.25;
  box-shadow:0 10px 24px rgba(0,0,0,.35); opacity:0; transform:translateY(-6px);
  pointer-events:none; transition:.18s;
}
.pc .pc-info:hover .pc-info-bubble{ opacity:1; transform:translateY(0); pointer-events:auto; }

/* secciones (cambia con tabs) */
.pc .pc-section{ display:none; }
.pc .pc-section.pc-active{ display:block; }

/* t√≠tulo ‚Äútareas con racha‚Äù */
.pc .pc-h4{
  margin:10px 4px 6px; font-size:13px; color:#ffd9a1;
  font-weight:800; letter-spacing:.3px;
}

/* Top‚Äë3 cards */
.pc .pc-top3{ display:grid; grid-template-columns:1fr; gap:8px; }
.pc .pc-tcard{
  position:relative; padding:10px; border-radius:12px;
  background:rgba(255,255,255,.03); border:1px solid var(--pc-border-2);
}
.pc .pc-thead{ position:absolute; right:8px; top:8px; display:flex; flex-direction:column; align-items:center; }
.pc .pc-fire{ font-size:18px; filter:drop-shadow(0 0 6px rgba(255,150,80,.6)); }
.pc .pc-streak{ margin-top:2px; font-weight:900; font-size:12px; color:var(--pc-orange); } /* xN */

.pc .pc-tname{ font-weight:800; font-size:14px; margin:0 0 4px; padding-right:48px; }
.pc .pc-row-mini{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.pc .pc-chips{ display:flex; gap:6px; flex-wrap:wrap; }
.pc .pc-chip{
  background:var(--pc-chip); color:#dbe2ff; border:1px solid var(--pc-border-2);
  padding:4px 8px; border-radius:999px; font-weight:700; font-size:11px; display:inline-flex; gap:6px; align-items:center;
}
.pc .pc-chip.pc-xp{ background:linear-gradient(135deg,#1b2140,#1f2750); }
.pc .pc-spark{ width:7px;height:7px;border-radius:50%;background:var(--pc-amber);box-shadow:0 0 8px var(--pc-amber); }

/* badges (se mantienen por ahora; en el paso 2 los reemplazamos por barra) */
.pc .pc-badges{ display:flex; gap:6px; margin-top:6px; flex-wrap:wrap; }
.pc .pc-badge{
  padding:4px 8px; border-radius:8px; font-size:11px; font-weight:900;
  border:1px solid var(--pc-border); letter-spacing:.2px; white-space:nowrap;
}
.pc .pc-badge.pc-max{ background:rgba(74,168,255,.16);  color:#cfe6ff; }
.pc .pc-badge.pc-now{ background:rgba(255,110,199,.20); color:#ffe2f3; }

/* filtro + lista */
.pc .pc-filter{
  width:100%; margin:10px 0 6px; padding:8px 10px; border-radius:10px;
  border:1px solid rgba(255,255,255,.10); background:#121733; color:#e8eeff; font-size:13px;
}
.pc .pc-list{
  border:1px solid var(--pc-border-2); border-radius:12px; overflow:hidden;
  background:linear-gradient(180deg,#11162b,#0f1430);
}
.pc .pc-row{
  display:grid; grid-template-columns: 1fr 70px 120px; gap:6px; align-items:center;
  padding:9px 10px; border-top:1px solid rgba(255,255,255,.05); font-size:13px;
}
.pc .pc-row.pc-label{ text-transform:uppercase; font-size:11px; letter-spacing:.4px; opacity:.7; }
.pc .pc-row:first-child{ border-top:none; }
.pc .pc-xp{ font-weight:800; text-align:right; width:100%; }
.pc .pc-right{ display:flex; justify-content:flex-end; }

/* bloque apilado Max/Ahora (temporal; paso 2 lo reemplazamos por barra) */
.pc .pc-stack{ display:flex; flex-direction:column; align-items:flex-end; gap:2px; }
.pc .pc-mini{
  padding:3px 6px; border-radius:7px; font-size:10px; font-weight:900; border:1px solid var(--pc-border);
}
.pc .pc-mini.pc-max{ background:rgba(74,168,255,.16); color:#cfe6ff; }
.pc .pc-mini.pc-now{ background:rgba(255,110,199,.20); color:#ffe2f3; }

/* spacing respecto a otras cards */
.right-column .pc-card{ margin-top:0; }  /* la columna ya tiene gap */

/* Responsive */
@media (max-width: 860px){
  .pc .pc-row{ grid-template-columns: 1fr 60px 110px; }
}
@media (max-width: 560px){
  .pc .pc-row{ grid-template-columns: 1fr 56px 1fr; }
  .pc .pc-right{ justify-content:flex-start; }
}

/* ===== Paso 2: barra semanal + chips "otras en racha" ===== */
.pc .pc-row{ min-height:42px; } /* hace la lista m√°s compacta */

.pc .pc-progress{
  position:relative;
  width:160px;
  height:12px;
  border-radius:999px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  overflow:hidden;
}
.pc .pc-progress-fill{
  position:absolute; left:0; top:0; bottom:0;
  width:0;
  background: linear-gradient(90deg, #7d3cff, #B17EFF);
  transition: width .25s ease;
}
.pc .pc-progress-label{
  position:absolute; left:0; right:0; top:50%; transform:translateY(-50%);
  font-size:10px; font-weight:900; text-align:center; color:#eaeaff;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
  pointer-events:none;
}
.pc .pc-progress-trophy{ margin-left:6px; filter:drop-shadow(0 1px 2px rgba(0,0,0,.4)); }
.pc .pc-progress-record{ box-shadow:inset 0 0 0 2px rgba(255,215,0,.18); }

.pc .pc-morestreak{
  display:flex; align-items:center; flex-wrap:wrap; gap:6px;
  margin:8px 2px 2px;
}
.pc .pc-morestreak-label{
  font-size:11px; opacity:.75; margin-right:4px;
}
.pc .pc-morestreak-chip{
  font-size:11px; font-weight:800; padding:4px 8px; border-radius:999px;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);
  white-space:nowrap;
}
/* === Daily Energy compacto (label + barra en l√≠nea) === */
.energy-box { padding-top: 12px; }

.energy-meter{
  display: grid;
  grid-template-columns: 72px 1fr; /* label | barra */
  align-items: center;
  gap: 10px;
  margin: 8px 0;
}

.energy-label{
  font-weight: 700;
  opacity: .9;
}

.energy-track{
  position: relative;
  height: 14px;                     /* m√°s finita */
  border-radius: 999px;
  background: #2b2f3f;              /* track oscuro alineado al dashboard */
  border: 1px solid rgba(255,255,255,.10);
  overflow: hidden;
}

/* El JS escribe el % como texto dentro del fill.
   Lo dejamos a la derecha, con chip legible. */
.energy-box .bar-fill{
  height: 100%;
  width: 0;                         /* el JS la mueve */
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 6px;
  font-size: 11px;
  font-weight: 800;
  color: #f2f4ff;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
  border-radius: inherit;
  transition: width .25s ease;
}

/* Paleta alineada al resto del dashboard */
.energy-box .bar-fill.hp{
  background: linear-gradient(90deg,#37B6C9,#69D6E3);    /* teal/cyan */
}
.energy-box .bar-fill.mood{
  background: linear-gradient(90deg,#E74C9E,#FF6EC7);    /* magenta/pink */
}
.energy-box .bar-fill.focus{
  background: linear-gradient(90deg,#8E66FF,#B17EFF);    /* violeta (tu accent) */
}

/* Separador inferior m√°s finito para que no ‚Äúpise‚Äù la card de abajo */
.energy-box { padding-bottom: 10px; }
.energy-box + .daily-cultivation-section { margin-top: 12px; }
